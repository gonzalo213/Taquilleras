@model List<Taquilleras.Entities.Transaction>
@using (Html.BeginForm("Find", "Admin", FormMethod.Post))
{
    <h4><strong>Modificacion de Venta</strong></h4>
    <div class="card">
        <div class="card-header">
            <div>
                <input required type="text" class="form-control col-3 offset-9" id="dpFilter" name="dpFilter" placeholder="Selecciona Fecha" />
            </div>
        </div>
        <div class="card-body">
            <blockquote class="blockquote mb-0">
                <div class="input-group mb-0">
                    <div class="input-group-prepend">
                        <input type="submit" name="name" value="Buscar" class="btn btn-outline-info" />
                    </div>
                    @Html.DropDownList("Taquilla", (List<SelectListItem>)TempData["TicketOffices"], "Selecciona Taquilla", new { @class = "form-control", required = "required" })
                </div>
            </blockquote>
        </div>
    </div>

}


@if (Model != null)
{
<div class="row" id="divDetails" @*style="text-align: right"*@>
    @foreach (Taquilleras.Entities.Transaction transaction in Model)
    {
        <div class="card-header">Turno @transaction.ShiftTypeId </div>
        <div class="col-sm-4 col-xs-6">@Html.Partial("_Item.cshtml", transaction.TransactionDetail)</div>
        
    }
</div>
}
<input type="button" id="btnClick" value="Click" class="btn btn-primary" />
<input type="button" id="btnApplyChanges" value="Aplicar cambios" class="btn btn-primary" />
<span id="span"></span>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
<link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css" />
<script>
    $('#dpFilter').datepicker({
        uiLibrary: 'bootstrap4'
    });

    $(function () {
        $("#btnClick").click(function () {
            var url = "@Url.Action("Test","Admin")";
            var fecha = $("#dpFilter").val;
            $.post(url, fecha).done(function (data) {


            });
        });
    });

    $(function (){
        $("#btnApplyChanges").click(function () {
            var jsonStr = '{"details":[{"ControlId":"","values":"0"},{"ControlId":"0","values":"0"}]}';
            var obj = JSON.parse(jsonStr);
            $("#divDetails").find(':input').each(function () {
                var elemento = this;
                obj['details'].push({ "tControlId": elemento.id, "value": elemento.value});
            })

            jsonStr = JSON.stringify(obj);
            alert(jsonStr);

            $.ajax({
                type: "POST",
                async: false,
                url: "@Url.Action("Test","Admin")",
                data: "{name:'Mauricio'}",
                contentType: "application/json",
                dataType: "json",

                success: function (json) {
                    $("#btnClick").val(json)
                },
                failure: function (response) {
                    alert("Error");
                },
                error: function (response) {
                    alert("Error");
                }

            })
        });
    });
</script>
